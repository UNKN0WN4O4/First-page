<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>UNKNOWN PAGE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />

  
  <link rel="preconnect" href="https://cdn.tailwindcss.com">
  <link rel="dns-prefetch" href="//cdn.tailwindcss.com">

  <link rel="dns-prefetch" href="//duckduckgo.com">
  <link rel="dns-prefetch" href="//www.google.com">
  <link rel="dns-prefetch" href="//www.bing.com">
  <link rel="dns-prefetch" href="//search.yahoo.com">
  <link rel="dns-prefetch" href="//www.perplexity.ai">
  <link rel="dns-prefetch" href="//unkn0wn4o4.github.io">
  <link rel="dns-prefetch" href="//stackoverflow.com">
  <link rel="dns-prefetch" href="//github.com">
  <link rel="dns-prefetch" href="//developer.mozilla.org">
  <link rel="dns-prefetch" href="//www.npmjs.com">
  <link rel="dns-prefetch" href="//pypi.org">
  <link rel="dns-prefetch" href="//search.maven.org">

  
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .fade { transition: all 200ms ease; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-slate-100 antialiased relative">
  <button id="addSiteBtn"
    class="fade fixed top-4 right-4 inline-flex items-center gap-2 rounded-full bg-slate-700/60 hover:bg-slate-600/70 px-4 py-2 shadow-lg ring-1 ring-white/10 backdrop-blur-md"
    title="Add site to Always On Display">
    <span class="inline-flex items-center justify-center w-7 h-7 rounded-full bg-emerald-500 text-white text-lg font-bold">+</span>
    <span class="hidden sm:inline text-sm">Add</span>
  </button>

  <aside id="aod" class="fixed top-16 right-4 flex flex-col gap-3 items-center z-10"></aside>

  <div class="fixed top-4 left-4 text-xs text-slate-300/80">
    <div class="bg-slate-800/60 ring-1 ring-white/10 backdrop-blur px-3 py-2 rounded-lg shadow">
      <div class="font-semibold tracking-wide">Shortcuts</div>
      <div>Ctrl+1 Google, Ctrl+2 Bing, Ctrl+3 Yahoo</div>
      <div>Ctrl+4 Perplexity, Ctrl+0 DuckDuckGo</div>
      <div>Ctrl+5 Stack Overflow, Ctrl+6 GitHub Code</div>
      <div>Ctrl+7 MDN, Ctrl+8 npm, Ctrl+9 PyPI, Ctrl+M Maven</div>
    </div>
  </div>

  <main class="min-h-screen w-full flex items-center justify-center px-4">
    <div class="max-w-3xl w-full text-center">
      <h1 class="text-5xl sm:text-6xl font-extrabold tracking-tight">
        <span class="bg-clip-text text-transparent bg-gradient-to-r from-fuchsia-400 via-violet-400 to-cyan-300 drop-shadow">
          UNKNOWN PAGE
        </span>
      </h1>

      <div class="mt-8 mx-auto w-full max-w-2xl">
        <form id="searchForm" autocomplete="off" class="relative">
          <input
            id="query"
            type="text"
            placeholder="Search the web..."
            inputmode="search"
            enterkeyhint="search"
            spellcheck="false"
            class="w-full rounded-full bg-slate-800/70 focus:bg-slate-800 text-slate-100 placeholder-slate-400 px-6 pr-36 py-4 text-lg shadow-2xl outline-none ring-1 ring-white/10 focus:ring-2 focus:ring-violet-400/60 backdrop-blur fade"
          />
          <div class="absolute right-2 top-1/2 -translate-y-1/2">
            <span id="engineBadge"
              class="fade inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-sm font-medium bg-amber-500 text-slate-900 shadow ring-1 ring-white/10">
              DuckDuckGo
              <kbd class="text-xs bg-white/70 text-slate-900 px-1.5 py-0.5 rounded">Ctrl+0</kbd>
            </span>
          </div>
        </form>

        <div class="pointer-events-none absolute inset-0 -z-10 blur-3xl opacity-30"
             style="background: radial-gradient(30rem 15rem at 50% 0%, rgba(139,92,246,.3), transparent 60%);"></div>
      </div>
    </div>
  </main>

  <script>
    const ENGINES = {
      duck: {
        name: 'DuckDuckGo',
        badgeColor: 'bg-amber-500',
        hint: 'Ctrl+0',
        buildUrl: q => `https://duckduckgo.com/?q=${encodeURIComponent(q)}`
      },
      google: {
        name: 'Google',
        badgeColor: 'bg-red-400',
        hint: 'Ctrl+1',
        buildUrl: q => `https://www.google.com/search?q=${encodeURIComponent(q)}`
      },
      bing: {
        name: 'Bing',
        badgeColor: 'bg-sky-400',
        hint: 'Ctrl+2',
        buildUrl: q => `https://www.bing.com/search?q=${encodeURIComponent(q)}`
      },
      yahoo: {
        name: 'Yahoo',
        badgeColor: 'bg-violet-400',
        hint: 'Ctrl+3',
        buildUrl: q => `https://search.yahoo.com/search?p=${encodeURIComponent(q)}`
      },
      perplexity: {
        name: 'Perplexity',
        badgeColor: 'bg-emerald-400',
        hint: 'Ctrl+4',
        buildUrl: q => `https://www.perplexity.ai/search?q=${encodeURIComponent(q)}`
      },

      // New engines
      stackoverflow: {
        name: 'Stack Overflow',
        badgeColor: 'bg-orange-400',
        hint: 'Ctrl+5',
        buildUrl: q => `https://stackoverflow.com/search?q=${encodeURIComponent(q)}`
      },
      github_code: {
        name: 'GitHub Code',
        badgeColor: 'bg-zinc-300',
        hint: 'Ctrl+6',
        buildUrl: q => `https://github.com/search?q=${encodeURIComponent(q)}&type=code`
      },
      mdn: {
        name: 'MDN Web Docs',
        badgeColor: 'bg-teal-400',
        hint: 'Ctrl+7',
        buildUrl: q => `https://developer.mozilla.org/en-US/search?q=${encodeURIComponent(q)}`
      },
      npm: {
        name: 'npm',
        badgeColor: 'bg-rose-500',
        hint: 'Ctrl+8',
        buildUrl: q => `https://www.npmjs.com/search?q=${encodeURIComponent(q)}`
      },
      pypi: {
        name: 'PyPI',
        badgeColor: 'bg-blue-500',
        hint: 'Ctrl+9',
        buildUrl: q => `https://pypi.org/search/?q=${encodeURIComponent(q)}`
      },
      maven: {
        name: 'Maven Central',
        badgeColor: 'bg-lime-400',
        hint: 'Ctrl+M',
        buildUrl: q => `https://search.maven.org/search?q=${encodeURIComponent(q)}`
      }
    };

    const queryEl = document.getElementById('query');
    const formEl = document.getElementById('searchForm');
    const engineBadgeEl = document.getElementById('engineBadge');
    const addSiteBtn = document.getElementById('addSiteBtn');
    const aodEl = document.getElementById('aod');

    const defaultEngineKey = 'duck';
    let engineKey = localStorage.getItem('engineKey') || defaultEngineKey;

    function setEngine(key) {
      if (!ENGINES[key] || engineKey === key) return;
      engineKey = key;
      localStorage.setItem('engineKey', engineKey);
      renderEngineBadge();
    }

    function renderEngineBadge() {
      const e = ENGINES[engineKey];
      const cls = 'fade inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-sm font-medium text-slate-900 shadow ring-1 ring-white/10';
      engineBadgeEl.className = cls + ' ' + e.badgeColor;
      engineBadgeEl.innerHTML = `${e.name} <kbd class="text-xs bg-white/70 text-slate-900 px-1.5 py-0.5 rounded">${e.hint}</kbd>`;
    }

    function doSearch(q) {
      const e = ENGINES[engineKey] || ENGINES[defaultEngineKey];
      window.location.assign(e.buildUrl(q));
    }

    formEl.addEventListener('submit', (ev) => {
      ev.preventDefault();
      const q = queryEl.value.trim();
      if (!q) return;
      doSearch(q);
    });

    document.addEventListener('keydown', (ev) => {
      const use = (ev.ctrlKey || ev.altKey) && !ev.shiftKey && !ev.metaKey;
      if (!use) return;
      const key = ev.key.toLowerCase();
      if (key === '0') { setEngine('duck'); ev.preventDefault(); }
      else if (key === '1') { setEngine('google'); ev.preventDefault(); }
      else if (key === '2') { setEngine('bing'); ev.preventDefault(); }
      else if (key === '3') { setEngine('yahoo'); ev.preventDefault(); }
      else if (key === '4') { setEngine('perplexity'); ev.preventDefault(); }
      else if (key === '5') { setEngine('stackoverflow'); ev.preventDefault(); }
      else if (key === '6') { setEngine('github_code'); ev.preventDefault(); }
      else if (key === '7') { setEngine('mdn'); ev.preventDefault(); }
      else if (key === '8') { setEngine('npm'); ev.preventDefault(); }
      else if (key === '9') { setEngine('pypi'); ev.preventDefault(); }
      else if (key === 'm') { setEngine('maven'); ev.preventDefault(); }
    });

    window.addEventListener('load', () => {
      renderEngineBadge();
      queryEl.focus({ preventScroll: true });

      const defaultAOD = { url: "https://unkn0wn4o4.github.io/AOD/", name: "AOD", icon: "🧿" };
      const currentSites = getAOD();
      if (!currentSites.some(s => s.url === defaultAOD.url)) {
        currentSites.push(defaultAOD);
        setAOD(currentSites);
      }
      renderAOD();
    }, { once: true });

    function getAOD() {
      try {
        return JSON.parse(localStorage.getItem('aodSites') || '[]');
      } catch {
        return [];
      }
    }
    function setAOD(sites) {
      localStorage.setItem('aodSites', JSON.stringify(sites));
    }

    function normalizeUrl(url) {
      let u = url.trim();
      if (!/^https?:\/\//i.test(u)) {
        u = 'https://' + u;
      }
      try { return new URL(u).toString(); } catch { return null; }
    }

    function createEl(tag, className, text) {
      const el = document.createElement(tag);
      if (className) el.className = className;
      if (text != null) el.textContent = text;
      return el;
    }

    function renderAOD() {
      const sites = getAOD();
      aodEl.innerHTML = '';
      const frag = document.createDocumentFragment();

      for (let i = 0; i < sites.length; i++) {
        const s = sites[i];

        const a = createEl('a', 'group relative w-12 h-12 rounded-2xl bg-slate-700/70 hover:bg-slate-600/70 ring-1 ring-white/10 backdrop-blur flex items-center justify-center shadow-lg');
        a.href = s.url;
        a.title = s.name || s.url;
        a.rel = 'noopener';
        a.dataset.idx = String(i);

        const span = createEl('span', 'text-xl select-none',
          (s.icon && s.icon.trim()) ? s.icon.trim() : (s.name ? s.name[0].toUpperCase() : '•')
        );
        a.appendChild(span);

        const tip = createEl('div', 'pointer-events-none absolute right-full mr-2 px-2 py-1 rounded bg-slate-900/90 text-slate-100 text-xs opacity-0 group-hover:opacity-100 transition', s.name || s.url);
        a.appendChild(tip);

        frag.appendChild(a);
      }

      aodEl.appendChild(frag);
    }

    
    aodEl.addEventListener('contextmenu', (ev) => {
      const target = ev.target.closest('a[data-idx]');
      if (!target) return;
      ev.preventDefault();
      const idx = Number(target.dataset.idx || -1);
      if (idx < 0) return;

      const list = getAOD();
      const s = list[idx];
      const ok = confirm(`Remove "${(s && (s.name || s.url)) || 'this'}" from Always On Display?`);
      if (!ok) return;

      list.splice(idx, 1);
      setAOD(list);
      renderAOD();
    });

    addSiteBtn.addEventListener('click', () => {
      const urlIn = prompt('Enter site URL (e.g., example.com or https://example.com):');
      if (!urlIn) return;
      const normalized = normalizeUrl(urlIn);
      if (!normalized) {
        alert('Invalid URL.');
        return;
      }
      const u = new URL(normalized);
      const defaultName = u.hostname.replace(/^www\./, '');
      const name = prompt('Enter a short name (optional):', defaultName) || defaultName;
      const icon = prompt('Enter an emoji/icon for the site (optional). Example: 🔗 ⭐ 🏁 📌') || '';
      const list = getAOD();
      list.push({ url: normalized, name, icon });
      setAOD(list);
      renderAOD();
    });
  </script>
</body>
</html>
